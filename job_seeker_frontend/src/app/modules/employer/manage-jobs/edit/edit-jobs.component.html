<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>
      <i class="fa-solid fa-briefcase me-2" aria-hidden="true"></i>
      <span>Edit Job</span>
    </h2>
    <button routerLink="/dashboard" class="btn btn-outline-primary">
      <a href="dashboard" class="nav-link"><i class="fa-solid fa-arrow-left me-2"></i> Back to Dashboard</a>
    </button>
  </div>

  <form [formGroup]="editJobForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="jobTitle" class="form-label">
        <i class="fa-solid fa-tag me-2" aria-hidden="true"></i>
        <span>Job Title</span>
      </label>
      <input type="text" class="form-control" id="jobTitle" formControlName="jobTitle" placeholder="Add job title, role, vacancies etc">
      <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('jobTitle')?.errors?.['required'] && editJobForm.get('jobTitle')?.touched">
        <span>Job title is required</span>
      </div> 
    </div>

    <div class="mb-3">
      <label for="tags" class="form-label">
        <i class="fa-solid fa-tags me-2" aria-hidden="true"></i>
        <span>Tags</span>
      </label>
      <input type="text" class="form-control" id="tags" formControlName="tags" placeholder="Job keyword, tags etc">
    </div>

    <div class="mb-3">
      <label for="jobRole" class="form-label">
        <i class="fa-solid fa-user-tie me-2" aria-hidden="true"></i>
        <span>Job Role</span>
      </label>
      <select class="form-select" id="jobRole" formControlName="jobRole">
        <option value="">Select...</option>
        <option *ngFor="let role of jobRoles" [value]="role">{{role}}</option>
      </select>
      <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('jobRole')?.errors?.['required'] && editJobForm.get('jobRole')?.touched">
        <span>Job role is required</span>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">
        <i class="fa-solid fa-money-bill-wave me-2" aria-hidden="true"></i>
        <span>Salary</span>
      </label>
      <div class="row">
        <div class="col-md-4 mb-2">
          <input type="number" class="form-control" formControlName="minSalary" placeholder="Minimum salary...">
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('minSalary')?.errors && editJobForm.get('minSalary')?.touched">
            <span *ngIf="editJobForm.get('minSalary')?.errors?.['required']">Minimum salary is required</span>
            <span *ngIf="editJobForm.get('minSalary')?.errors?.['min']">Salary cannot be negative</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <input type="number" class="form-control" formControlName="maxSalary" placeholder="Maximum salary...">
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('maxSalary')?.errors && editJobForm.get('maxSalary')?.touched">
            <span *ngIf="editJobForm.get('maxSalary')?.errors?.['required']">Maximum salary is required</span>
            <span *ngIf="editJobForm.get('maxSalary')?.errors?.['min']">Salary cannot be negative</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="salaryType">
            <option value="">Select...</option>
            <option *ngFor="let type of salaryTypes" [value]="type">{{type}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('salaryType')?.errors?.['required'] && editJobForm.get('salaryType')?.touched">
            <span>Salary type is required</span>
          </div>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">
        <i class="fa-solid fa-info-circle me-2" aria-hidden="true"></i>
        <span>Advance Information</span>
      </label>
      <div class="row">
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="education">
            <option value=""><i class="fa-solid fa-graduation-cap"></i>Education...</option>
            <option *ngFor="let level of educationLevels" [value]="level">{{level}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('education')?.errors?.['required'] && editJobForm.get('education')?.touched">
            <span>Education level is required</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="experience">
            <option value=""><i class="fa-solid fa-business-time"></i>Experience...</option>
            <option *ngFor="let exp of experienceLevels" [value]="exp">{{exp}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('experience')?.errors?.['required'] && editJobForm.get('experience')?.touched">
            <span>Experience level is required</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="jobType">
            <option value=""><i class="fa-solid fa-briefcase"></i>Job Type...</option>
            <option *ngFor="let type of jobTypes" [value]="type">{{type}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('jobType')?.errors?.['required'] && editJobForm.get('jobType')?.touched">
            <span>Job type is required</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="vacancies">
            <option value=""><i class="fa-solid fa-users"></i>Vacancies...</option>
            <option *ngFor="let count of vacanciesOptions" [value]="count">{{count}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('vacancies')?.errors?.['required'] && editJobForm.get('vacancies')?.touched">
            <span>Number of vacancies is required</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <input type="date" class="form-control" formControlName="expirationDate" placeholder="<i class='fa-solid fa-calendar'></i>DD/MM/YYYY">
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('expirationDate')?.errors?.['required'] && editJobForm.get('expirationDate')?.touched">
            <span>Expiration date is required</span>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <select class="form-select" formControlName="jobLevel">
            <option value=""><i class="fa-solid fa-layer-group"></i>Job Level...</option>
            <option *ngFor="let level of jobLevels" [value]="level">{{level}}</option>
          </select>
          <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('jobLevel')?.errors?.['required'] && editJobForm.get('jobLevel')?.touched">
            <span>Job level is required</span>
          </div>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">
        <i class="fa-solid fa-align-left me-2" aria-hidden="true"></i>
        <span>Description</span>
      </label>
      <textarea class="form-control" id="description" rows="4" formControlName="description" placeholder="Add your job description..."></textarea>
      <div class="alert alert-danger mt-2" *ngIf="editJobForm.get('description')?.errors?.['required'] && editJobForm.get('description')?.touched">
        <span>Job description is required</span>
      </div>
    </div>
    <div class="mb-3">
      <label for="responsibilities" class="form-label">
        <i class="fa-solid fa-list-check me-2" aria-hidden="true"></i>
        <span>Responsibilities</span>
      </label>
      <textarea class="form-control" id="responsibilities" rows="4" formControlName="responsibilities" placeholder="Add job responsibilities..."></textarea>
    </div>

    <div class="text-center">
      <button type="submit" [disabled]="!editJobForm.valid" class="btn btn-primary">
        Save Changes
      </button>
    </div>
  </form>
</div>
